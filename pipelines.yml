# pipelines:
#   - name: P_stepletTestReports_matrix
#     steps:
#       - name: s_stepletTestReports
#         type: Matrix
#         stepMode: Bash
# #         configuration:
# #           inputResources:
# #             - name: r_stepletTestReports
#         stepletMultipliers:
#           environmentVariables:
#             - env1: one
#         execution:
#           onExecute:
#             - cd $res_r_stepletTestReports_resourcePath
#             - add_run_variables imageTag="master"
# #             - mkdir -p ${step_workspace_dir}
#             - echo "hi" > touch cachefile.txt
#     #        - pwd cachefile.txt
#             - add_run_variables foo="bar" test="qa"
#             - add_pipeline_variables imageName="myimage" domainName="jfrog"
#             - python3 -m py_compile tests/core/sampleExecutionFile/calc.py
#             - pip install --upgrade pip
#             - hash -d pip
#             - pip install pytest
#             - cd $res_r_stepletTestReports_resourcePath
#             - py.test --verbose --junit-xml test-reports/results.xml tests/core/sampleExecutionFile/test_calc.py
#             - save_tests $res_r_stepletTestReports_resourcePath/test-reports/results.xml



resources:
  - name: r_stepTestReports_v1
    type: GitRepo
    configuration:
      gitProvider: varsha_github
      path: Varsha-Arun/Org_test_Automation

pipelines:
  - name: P_stepTestReports_v1
    steps:
      - name: s_stepTestReports_v1
        type: Bash
        configuration:
          inputResources:
            - name: r_stepTestReports_v1
        execution:
          onExecute:
            - cd $res_r_stepTestReports_v1_resourcePath
            - add_run_files tests/core/sampleExecutionFile/calc.py my_files
            - python3 -m py_compile tests/core/sampleExecutionFile/calc.py
            - pip install --upgrade pip
            - hash -d pip
            - pip install pytest
            - cd $res_r_stepTestReports_v1_resourcePath
            - py.test --verbose --junit-xml test-reports/results.xml tests/core/sampleExecutionFile/test_calc.py
            - save_tests $res_r_stepTestReports_v1_resourcePath/test-reports/results.xml
            - restore_run_files my_files tests/core/sampleExecutionFile/calc.py
