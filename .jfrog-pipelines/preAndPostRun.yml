pipelines:
  - name: RunHooksPipeline
    preRun:
      execution:
        onExecute:
          - printenv
          - echo "Executing Pre Run"
          - echo "new"
          - set_run_name 'test_run_name_too_long_test_run_name_too_long_test_run_name_too_long_test_run_name_too_long_test_run_name_too_long_test_run_name_too_long_'
          - update_run_description 'test_run_description_too_long_test_run_description_too_long_test_run_description_too_long_test_run_description_too_long_test_run_description_too_long_test_run_description_too_long_test_run_description_too_long_'
            
    postRun:
      execution:
        onExecute:
          - printenv
          - echo "Executing Pre Run"
          - echo "new"
          - set_run_name 'post run name'
          - update_run_description 'test post run desc'
    steps:
      - name: A
        type: Bash
        execution:
          onExecute:
            - printenv
            - echo "Step A"
      - name: B
        type: Bash
        configuration:
          inputSteps:
            - name: A
        execution:
          onExecute:
            - printenv
            - echo "Step B"
      - name: C
        type: Bash
        configuration:
          inputSteps:
            - name: A
        execution:
          onExecute:
            - printenv
            - echo "Step C"


  - name: Matrix_NodePool_Pipeline_Rutime_Varsha
    configuration:
      nodePool: win_2019
      runtime:
        type: image
        image:
          auto:
            language: node
            versions:
              - '16'
    steps:
      - name: matrix_1_Varsha
        type: Matrix
        stepletMultipliers:
          environmentVariables:
            - name: test
        execution:
          onExecute:
            - echo Im executing
          onSuccess:
            - echo 'i am onsuccess'
          onFailure:
            - echo 'i am onfailure'
          onComplete:
            - echo 'i am oncomplete'
                
  - name: Matrix_Pipeline_Rutime_Step_Runtime_Varsha
    steps:
      - name: matrix_1_Varsha
        type: Matrix
        configuration:
          multiNode: true
        stepletMultipliers:
          runtimes:
            - type: image
              image:
                auto:
                  language: node
                  versions:
                    - '17'
          nodePools:
            - u18dynamic
            - win_2019
          environmentVariables:
            - name: test
        execution:
          onExecute:
            - echo Im executing
          onSuccess:
            - echo 'i am onsuccess'
          onFailure:
            - echo 'i am onfailure'
          onComplete:
            - echo 'i am oncomplete'
                           
  - name: Matrix_Pipeline_Rutime_Steplet_Runtime_Varsha
    configuration:
      runtime:
        type: image
        image:
          auto:
            language: node
            versions:
              - '16'
    steps:
      - name: matrix_1_Varsha
        type: Matrix
        configuration:
          multiNode: true
        stepletMultipliers:
          nodePools:
            - u18dynamic
            - win_2019
          environmentVariables:
            - name: test
        execution:
          onExecute:
            - echo Im executing
          onSuccess:
            - echo 'i am onsuccess'
          onFailure:
            - echo 'i am onfailure'
          onComplete:
            - echo 'i am oncomplete'
